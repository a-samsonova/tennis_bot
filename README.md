# TennisBot

## Решаемая задача

Данный бот помогает тренеру автоматизировать рутинные задачи, которые отвлекают его от тренировочного процесса, а именно: 
 * позволяет ученикам записываться на доступные тренировки (за счет отыгрышей в случае групповых)
 * пропускать тренировку, учитывая время, за которое нужно предупредить тренера
 * посмотреть количество доступных отыгрышей, данные о группе игрока, данные об оплате за следующий месяц

Раньше нужно было беспокоить тренера по каждому этому вопросу в whatsapp (игроков +- 60)
## Демонстрация работы

Функционал бота можно посмотреть <a href="https://drive.google.com/file/d/1goSCWcxSFsXwz8m4IWx9hJS_CmxgmqeP/view?usp=sharing"> на видео </a>. <br>
Один бот пользовательский (для игроков), другой админский (для тренера).

## Используемые технологии

В качестве основного ЯП используется <b>Python 3.6</b>, фреймворк для back-end: <b> Django </b>, был выбран, т.к. имеет удобную админку для управления данными. 
В качестве БД используется <b> PostgreSql </b>. Для разворачивания тестовой базы локально нужно создать базу данных "tennis" и внести туда тестовые данные. 
Это можно сделать вручную на сайте админки, <br> либо <b> psql tennis  < ./tennis_example.sql </b>.

## Первый запуск

1. Установить необходимые пакеты: <b>pip install -r requirements.txt</b>
2. Накатить миграции: <b> python manage.py makemigrations </b> -> <b> python manage.py migrate </b>
3. Запустить админку: <b> python manage.py runserver </b>
4. Запуск бота: <b>ipython tele_interface/main.py tennis</b>
5. Запуск админского бота: <b>ipython tele_interface/main.py admin</b>

P.s. после нажатия /start пользователь проходит регистрацию -- вводит имя, фамилию, номер телефона. По дефолту статус у user будет waiting, поэтому основной функционал будет недоступен, нужно поставить либо training, либо arbitrary.

## Выкатывание обновлений

1. Сделать обновление локально на тестовой базе
2. Сделать push или pull request в master 
3. Зайти на сервер, перейти в <i> /home/nikita/code/TennisBot/tennis_bot/tennis_bot </i>
4. git pull
5. sudo service supervisor restart (в дальнейшем можно будет настроить через webhook)

Если нужно зайти в shell, то сначала необходимо активировать виртуальное окружение -- source /home/nikita/code/tennis_venv/bin/activate 

## P.S.P.S.

В данный момент этот проект дорабатывается и улучшается -- в основном запрос на то, чтобы перетащить весь функционал с сайта админки в админский бот.
